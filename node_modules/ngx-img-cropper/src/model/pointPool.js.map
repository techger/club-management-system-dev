{"version":3,"file":"pointPool.js","sourceRoot":"","sources":["../../../src/model/pointPool.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAEhC,IAAA;IAME,mBAAY,WAAmB;QAC7B,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC;QAC3B,IAAI,IAAI,GAAU,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,KAAK,EAAE,CAAC,CAAC;QAEtD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC;YACrC,IAAI,CAAC,GAAG,IAAI,KAAK,EAAE,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YACd,IAAI,GAAG,CAAC,CAAC;SACV;KACF;IAED,sBAAW,qBAAQ;aAAnB;YACE,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;SAC5B;;;OAAA;IAEM,0BAAM,GAAb,UAAc,CAAS,EAAE,CAAS;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC;YAChC,MAAM,gBAAgB,CAAC;SACxB;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,GAAU,IAAI,CAAC,cAAc,CAAC;QACnC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,IAAI,CAAC;QAC7B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,MAAM,CAAC,CAAC,CAAC;KACV;IAEM,+BAAW,GAAlB,UAAmB,CAAQ;QACzB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;KACzB;oBAzCH;IA0CC,CAAA;AAxCD,qBAwCC","sourcesContent":["import { Point } from \"./point\";\r\n\r\nexport class PointPool {\r\n  private static _instance: PointPool;\r\n\r\n  private borrowed: number;\r\n  private firstAvailable: Point;\r\n\r\n  constructor(initialSize: number) {\r\n    PointPool._instance = this;\r\n    let prev: Point = (this.firstAvailable = new Point());\r\n\r\n    for (let i = 1; i < initialSize; i++) {\r\n      let p = new Point();\r\n      prev.next = p;\r\n      prev = p;\r\n    }\r\n  }\r\n\r\n  static get instance(): PointPool {\r\n    return PointPool._instance;\r\n  }\r\n\r\n  public borrow(x: number, y: number): Point {\r\n    if (this.firstAvailable == null) {\r\n      throw \"Pool exhausted\";\r\n    }\r\n    this.borrowed++;\r\n    let p: Point = this.firstAvailable;\r\n    this.firstAvailable = p.next;\r\n    p.x = x;\r\n    p.y = y;\r\n    return p;\r\n  }\r\n\r\n  public returnPoint(p: Point) {\r\n    this.borrowed--;\r\n    p.x = 0;\r\n    p.y = 0;\r\n    p.next = this.firstAvailable;\r\n    this.firstAvailable = p;\r\n  }\r\n}\r\n"]}