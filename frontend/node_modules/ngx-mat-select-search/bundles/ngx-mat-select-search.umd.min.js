!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/forms"),require("@angular/cdk/keycodes"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/material"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-mat-select-search",["exports","@angular/forms","@angular/cdk/keycodes","rxjs","rxjs/operators","@angular/core","@angular/material","@angular/common"],t):t(e["ngx-mat-select-search"]={},e.ng.forms,e.ng.cdk.keycodes,e.rxjs,e.rxjs.operators,e.ng.core,e.ng.material,e.ng.common)}(this,function(e,t,n,a,s,i,o,r){"use strict";var c=function(){function e(){}return e.decorators=[{type:i.Directive,args:[{selector:"[ngxMatSelectSearchClear]"}]}],e}(),l=function(){function e(e,t,n){void 0===n&&(n=null),this.matSelect=e,this.changeDetectorRef=t,this.matOption=n,this.placeholderLabel="Suche",this.noEntriesFoundLabel="Keine Optionen gefunden",this.clearSearchInput=!0,this.searching=!1,this.disableInitialFocus=!1,this.onChange=function(e){},this.onTouched=function(e){},this.overlayClassSet=!1,this.change=new i.EventEmitter,this._onDestroy=new a.Subject}return Object.defineProperty(e.prototype,"isInsideMatOption",{get:function(){return!!this.matOption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this,e="mat-select-search-panel";this.matSelect.panelClass?Array.isArray(this.matSelect.panelClass)?this.matSelect.panelClass.push(e):"string"==typeof this.matSelect.panelClass?this.matSelect.panelClass=[this.matSelect.panelClass,e]:"object"==typeof this.matSelect.panelClass&&(this.matSelect.panelClass[e]=!0):this.matSelect.panelClass=e,this.matOption&&(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search")),this.matSelect.openedChange.pipe(s.delay(1),s.takeUntil(this._onDestroy)).subscribe(function(e){e?(t.getWidth(),t.disableInitialFocus||t._focus()):t.clearSearchInput&&t._reset()}),this.matSelect.openedChange.pipe(s.take(1)).pipe(s.takeUntil(this._onDestroy)).subscribe(function(){t._options=t.matSelect.options,t._options.changes.pipe(s.takeUntil(t._onDestroy)).subscribe(function(){var e=t.matSelect._keyManager;e&&t.matSelect.panelOpen&&setTimeout(function(){e.setFirstItemActive(),t.getWidth(),t.matOption&&(t._noEntriesFound()?t.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):t.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"))},1)})}),this.change.pipe(s.takeUntil(this._onDestroy)).subscribe(function(){t.changeDetectorRef.detectChanges()}),this.initMultipleHandling()},e.prototype.ngOnDestroy=function(){this._onDestroy.next(),this._onDestroy.complete()},e.prototype.ngAfterViewInit=function(){var e=this;this.setOverlayClass(),this.matSelect.openedChange.pipe(s.take(1),s.takeUntil(this._onDestroy)).subscribe(function(){e.matSelect.options.changes.pipe(s.takeUntil(e._onDestroy)).subscribe(function(){e.changeDetectorRef.markForCheck()})})},e.prototype._handleKeydown=function(e){(e.key&&1===e.key.length||e.keyCode>=n.A&&e.keyCode<=n.Z||e.keyCode>=n.ZERO&&e.keyCode<=n.NINE||e.keyCode===n.SPACE)&&e.stopPropagation()},e.prototype.writeValue=function(e){e!==this._value&&(this._value=e,this.change.emit(e))},e.prototype.onInputChange=function(e){e!==this._value&&(this.initMultiSelectedValues(),this._value=e,this.onChange(e),this.change.emit(e))},e.prototype.onBlur=function(e){this.writeValue(e),this.onTouched()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype._focus=function(){if(this.searchSelectInput&&this.matSelect.panel){var e=this.matSelect.panel.nativeElement,t=e.scrollTop;this.searchSelectInput.nativeElement.focus(),e.scrollTop=t}},e.prototype._reset=function(e){this.searchSelectInput&&(this.searchSelectInput.nativeElement.value="",this.onInputChange(""),this.matOption&&!e&&this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"),e&&this._focus())},e.prototype.setOverlayClass=function(){var n=this;if(!this.overlayClassSet){var a=["cdk-overlay-pane-select-search"];this.matOption||a.push("cdk-overlay-pane-select-search-with-offset"),this.matSelect.overlayDir.attach.pipe(s.takeUntil(this._onDestroy)).subscribe(function(){for(var t,e=n.searchSelectInput.nativeElement;e=e.parentElement;)if(e.classList.contains("cdk-overlay-pane")){t=e;break}t&&a.forEach(function(e){t.classList.add(e)})}),this.overlayClassSet=!0}},e.prototype.initMultipleHandling=function(){var e=this;this.matSelect.valueChange.pipe(s.takeUntil(this._onDestroy)).subscribe(function(t){if(e.matSelect.multiple){var n=!1;if(e._value&&e._value.length&&e.previousSelectedValues&&Array.isArray(e.previousSelectedValues)){t&&Array.isArray(t)||(t=[]);var a=e.matSelect.options.map(function(e){return e.value});e.previousSelectedValues.forEach(function(e){-1===t.indexOf(e)&&-1===a.indexOf(e)&&(t.push(e),n=!0)})}n&&e.matSelect._onChange(t),e.previousSelectedValues=t}})},e.prototype.getWidth=function(){if(this.innerSelectSearch&&this.innerSelectSearch.nativeElement){for(var e,t=this.innerSelectSearch.nativeElement;t=t.parentElement;)if(t.classList.contains("mat-select-panel")){e=t;break}e&&(this.innerSelectSearch.nativeElement.style.width=e.clientWidth+"px")}},e.prototype.initMultiSelectedValues=function(){this.matSelect.multiple&&!this._value&&(this.previousSelectedValues=this.matSelect.options.filter(function(e){return e.selected}).map(function(e){return e.value}))},e.prototype._noEntriesFound=function(){if(this._options)return this.matOption?this.noEntriesFoundLabel&&this.value&&1===this._options.length:this.noEntriesFoundLabel&&this.value&&0===this._options.length},e.decorators=[{type:i.Component,args:[{selector:"ngx-mat-select-search",template:'\x3c!-- Placeholder to adjust vertical offset of the mat-option elements --\x3e\n<input matInput class="mat-select-search-input mat-select-search-hidden"/>\n\n\x3c!-- Note: the  mat-datepicker-content mat-tab-header are needed to inherit the material theme colors, see PR #22 --\x3e\n<div\n      #innerSelectSearch\n      class="mat-select-search-inner mat-typography mat-datepicker-content mat-tab-header"\n      [ngClass]="{\'mat-select-search-inner-multiple\': matSelect.multiple}">\n  <input matInput\n         class="mat-select-search-input"\n         autocomplete="off"\n         #searchSelectInput\n         (keydown)="_handleKeydown($event)"\n         (input)="onInputChange($event.target.value)"\n         (blur)="onBlur($event.target.value)"\n         [placeholder]="placeholderLabel"\n  />\n  <mat-spinner *ngIf="searching"\n          class="mat-select-search-spinner"\n          diameter="16"></mat-spinner>\n\n  <button mat-button *ngIf="value && !searching"\n          mat-icon-button\n          aria-label="Clear"\n          (click)="_reset(true)"\n          class="mat-select-search-clear">\n    <ng-content *ngIf="clearIcon; else defaultIcon" select="[ngxMatSelectSearchClear]"></ng-content>\n    <ng-template #defaultIcon>\n      <mat-icon>close</mat-icon>\n    </ng-template>\n  </button>\n</div>\n\n<div *ngIf="_noEntriesFound()"\n     class="mat-select-search-no-entries-found">\n  {{noEntriesFoundLabel}}\n</div>\n\x3c!--\nCopyright (c) 2018 Bithost GmbH All Rights Reserved.\n\nUse of this source code is governed by an MIT-style license that can be\nfound in the LICENSE file at https://angular.io/license\n--\x3e\n',providers:[{provide:t.NG_VALUE_ACCESSOR,useExisting:i.forwardRef(function(){return e}),multi:!0}],changeDetection:i.ChangeDetectionStrategy.OnPush,styles:[".mat-select-search-hidden{visibility:hidden}.mat-select-search-inner{position:absolute;top:0;width:100%;border-bottom-width:1px;border-bottom-style:solid;z-index:100;font-size:inherit;box-shadow:none;border-radius:0;-webkit-transform:translate3d(0,0,0)}.mat-select-search-inner.mat-select-search-inner-multiple{width:100%}/deep/ .mat-select-search-panel{-webkit-transform:none!important;transform:none!important;overflow-x:hidden}.mat-select-search-input{padding:16px 36px 16px 16px;box-sizing:border-box}.mat-select-search-no-entries-found{padding:16px}.mat-select-search-clear{position:absolute;right:4px;top:5px}.mat-select-search-spinner{position:absolute;right:16px;top:calc(50% - 8px)}:host.mat-select-search-inside-mat-option .mat-select-search-input{padding-top:0;padding-bottom:0;height:3em;line-height:3em}:host.mat-select-search-inside-mat-option .mat-select-search-clear{top:3px}/deep/ .cdk-overlay-pane-select-search.cdk-overlay-pane-select-search-with-offset{margin-top:-50px}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search{position:static;padding:0}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search .mat-option-pseudo-checkbox{display:none}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search.mat-select-search-no-entries-found{height:6em}"]}]}],e.ctorParameters=function(){return[{type:o.MatSelect,decorators:[{type:i.Inject,args:[o.MatSelect]}]},{type:i.ChangeDetectorRef},{type:o.MatOption,decorators:[{type:i.Optional},{type:i.Inject,args:[o.MatOption]}]}]},e.propDecorators={placeholderLabel:[{type:i.Input}],noEntriesFoundLabel:[{type:i.Input}],clearSearchInput:[{type:i.Input}],searching:[{type:i.Input}],disableInitialFocus:[{type:i.Input}],searchSelectInput:[{type:i.ViewChild,args:["searchSelectInput",{read:i.ElementRef}]}],innerSelectSearch:[{type:i.ViewChild,args:["innerSelectSearch",{read:i.ElementRef}]}],clearIcon:[{type:i.ContentChild,args:[c]}],isInsideMatOption:[{type:i.HostBinding,args:["class.mat-select-search-inside-mat-option"]}]},e}(),p=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[r.CommonModule,o.MatButtonModule,o.MatIconModule,o.MatInputModule,o.MatProgressSpinnerModule],declarations:[l,c],exports:[l,c]}]}],e}();e.MatSelectSearchComponent=l,e.MatSelectSearchVersion="1.6.0",e.NgxMatSelectSearchModule=p,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-mat-select-search.umd.min.js.map